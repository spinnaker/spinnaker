
redis.connection: redis://${embedded.redis.user}:${embedded.redis.password}@localhost:${embedded.redis.port}

kayenta:
  standaloneCanaryAnalysis.enabled: true

  aws:
    enabled: true
    accounts:
      - name: minio-store-account
        bucket: kayenta-bucket
        rootFolder: kayenta
        endpoint: http://${embedded.minio.host}:${embedded.minio.port}
        explicitCredentials:
          accessKey: ${embedded.minio.accessKey}
          secretKey: ${embedded.minio.secretKey}
        supportedTypes:
          - OBJECT_STORE
          - CONFIGURATION_STORE

  memory:
    enabled: true
    accounts:
      - name: in-memory-store-account
        supportedTypes:
          - OBJECT_STORE

  s3:
    enabled: true

# Does it make sense to publish all Kayenta metrics to all datasources in integraion tests?
spring:
  autoconfigure:
    exclude: >
      org.springframework.boot.actuate.autoconfigure.metrics.web.tomcat.TomcatMetricsAutoConfiguration,
      org.springframework.boot.actuate.autoconfigure.metrics.JvmMetricsAutoConfiguration,
      org.springframework.boot.actuate.autoconfigure.metrics.LogbackMetricsAutoConfiguration,
      org.springframework.boot.actuate.autoconfigure.metrics.SystemMetricsAutoConfiguration,
      org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,

management:
  endpoints.web:
    base-path: /
    exposure.include: '*'
  endpoint.health.show-details: always
  metrics:
    export:
      graphite:
        graphite-tags-enabled: false

# Disable checking Auth headers to external resources (pollutes logs with lots of warnings)
ok-http-client:
  interceptor:
    skip-header-check: true
